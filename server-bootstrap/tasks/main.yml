---
  - include: install.yml
  - include: python-install.yml
    when: bootstrap_python_install

  - name: bootstrap | Setting locale
    locale_gen:
      name={{bootstrap_locale}}
      state=present
    when: bootstrap_set_locale and ansible_distribution == 'Ubuntu'

  - name: bootstrap | Setting timezone
    template:
      dest=/etc/timezone
      src=timezone.j2
      owner=root
      group=root
      mode=644
      backup=yes
    when: ansible_distribution == 'Ubuntu'

  - name: bootstrap | Moving localtime file
    command:
      mv /etc/localtime /etc/old.timezone
    when: ansible_distribution == 'Amazon'

  - name: bootstrap | Reconfiguring tzdata
    command:
      ln -s /usr/share/zoneinfo/{{bootstrap_timezone}} /etc/localtime
    when: ansible_distribution == 'Amazon'

  - name: bootstrap | Copying our public key to the server
    authorized_key:
      user="{{remote_user}}"
      key="{{item}}"
    with_file:
      - "{{ local_home }}/.ssh/id_rsa.pub"
    when: bootstrap_copy_publickey

