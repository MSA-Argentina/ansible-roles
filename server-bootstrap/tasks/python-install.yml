---
  - name: Ubuntu | Installing apt packages useful for python development
    apt:
      pkg={{item}}
      state=latest
      update_cache=yes
    with_items:
      - libsqlite3-dev
      - python-apt
      - python-dev
      - python3-dev
      - python-pip
      - python-software-properties
      - python-virtualenv
      - python-setuptools
      - sqlite3
      - virtualenvwrapper
    when: ansible_distribution == 'Ubuntu'

  - name: Amazon | Installing apt packages useful for python development
    yum:
      name={{item}}
      state=latest
      enablerepo=epel
      update_cache=yes
    with_items:
      - sqlite-devel
      - python-devel
      - python34
      - python34-devel
      - python34-pip
      - python34-virtualenv
      - python34-setuptools
      - sqlite
      - python-virtualenvwrapper
    when: ansible_distribution == 'Amazon'

  - name: FreeBSD | Installing packages useful for python development
    pkgng:
      pkg={{item}}
      state=present
    with_items:
      - py27-pip
      - py27-virtualenv
      - py27-setuptools
      - sqlite3
      - py27-virtualenvwrapper
      - python35
    when: ansible_distribution == 'FreeBSD'

  - name: Amazon | Installing virtualenvwrapper
    pip:
      name=virtualenvwrapper
    when: ansible_distribution == 'Amazon'

  - name: Adding WORKON_HOME environment variable
    lineinfile:
      dest=/home/{{ remote_user}}/.bashrc
      line="export WORKON_HOME=~/{{bootstrap_virtualenv_workon_home}}"
      state=present
      create=yes
    become: yes
    become_user: "{{remote_user}}"

  - name: FreeBSD | Adding WORKON_HOME environment variable
    lineinfile:
      dest=/home/{{ remote_user}}/.bash_profile
      line="WORKON_HOME=~/{{bootstrap_virtualenv_workon_home}}"
      state=present
      create=yes
    become: yes
    become_user: "{{remote_user}}"
    when: ansible_distribution == 'FreeBSD'

  - name: FreeBSD | Adding VIRTUALENVWRAPPER_PYTHON environment variable
    lineinfile:
      dest=/home/{{ remote_user}}/.bash_profile
      line="VIRTUALENVWRAPPER_PYTHON={{freebsd_python27_path}}"
      state=present
      create=yes
    become: yes
    become_user: "{{remote_user}}"
    when: ansible_distribution == 'FreeBSD'

  - name: FreeBSD | Source virtualenvwrapper
    lineinfile:
      dest=/home/{{ remote_user}}/.bash_profile
      line="source /usr/local/bin/virtualenvwrapper.sh"
      state=present
      create=yes
    become: yes
    become_user: "{{remote_user}}"
    when: ansible_distribution == 'FreeBSD'

  - name: Creating virtualenv directory
    file:
      path=/home/{{ remote_user }}/{{bootstrap_virtualenv_workon_home}}
      state=directory
      owner={{remote_user}}
    become: yes
    become_user: "{{remote_user}}"
